<div class="main-ctr">
  <div class="main-content">
    <h1>Choose your next lodging</h1>
  </div>
    </ul>
      <%= form_with url: flats_path, method: :get, class: "d-flex" do %>
        <%= text_field_tag :query,
            params[:query],
            class: "form-control me-2",
            placeholder: "Find a flat"
        %>
      <%= submit_tag "Search", class: "book-button btn-outline-success" %>
    <% end %>
</div>

<div class="d-flex justify-content-center">
  <div class="d-flex flex-wrap" style="width: 90%;">
    <% x = 0 %>
    <% @flats.each do |flat| %>
      <% x += 1 %>
      <%= link_to flat_path(flat) do %>
        <div class="card-flat text-center p-2 m-3 bd-highlight" style="width: 18rem;">
          <!--Philipp added the line below to display a cloudinary image instead of an image from a url: -->
          <% if flat.photo.attached? %>
            <%= cl_image_tag flat.photo.key, crop: :fill %>
            <!-- Optional to add later: else display random image -->
          <% end %>
          <div class="card-flat-infos">
            <div>
              <h2><%= flat.name %></h2>
            </div>
            <h2 class="card-flat-pricing">â‚¬<%= flat.price %></h2>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>

    <div id = "map" style="width: 100%; height: 500px; position: sticky; top: 0;"
      data-controller="map"
      data-map-markers-value="<%= @markers.to_json %>"
      data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
  <!--</div>-->
</div>
